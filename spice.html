<!DOCTYPE html>
<html>

<head>
    <title>GI-shop - Spices</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" type="icon/x-image" href="/CaseStudy/image.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .section1 { margin: 100px; }
        button { 
            padding: 10px; 
            border: 1px solid; 
            border-radius: 5px; 
            cursor: pointer; 
            background-color: rgb(203, 30, 30); 
            color: white; 
        }
        a { text-decoration: none; color: white; }
        #back, #stock-manage { margin: 10px; padding: 10px; }
        .stock-info { color: #666; font-size: 0.9em; margin-top: 5px; }
        .low-stock { color: #dc3545; font-weight: bold; }
        .out-of-stock { color: #dc3545; font-weight: bold; }
        .card-footer { background: transparent; border-top: none; }
    </style>
</head>

<body>
    <button id="back"><a href="/CaseStudy/mainpage.html">ðŸ”™ Back</a></button>
    <button id="stock-manage"><a href="stock.html">ðŸ“¦ Manage Stock</a></button>

    <section class="section1">
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <!-- Cloves -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://media.istockphoto.com/id/509610291/photo/bowl-of-clove-isolated-on-white.jpg?s=1024x1024&w=is&k=20&c=bhy6E1walp4gLnTomw3oKTREDPYu0C1NE4kO9jeFMzg=" class="card-img-top" alt="Cloves">
                    <div class="card-body">
                        <h5 class="card-title">Cloves</h5>
                        <p class="card-text">Rich and aromatic cloves for bold flavors.</p>
                        <p><strong>Cost: â‚¹</strong><span class="price">6450</span></p>
                        <div class="stock-info" id="cloves-stock"></div>
                    </div>
                    <button onclick="addToCart('Cloves', this)">
                        <div class="card-footer">Add to cart</div>
                    </button>
                </div>
            </div>

            <!-- Turmeric -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://img.emedihealth.com/wp-content/uploads/2020/10/turmeric-feat-1.jpg" class="card-img-top" alt="Turmeric">
                    <div class="card-body">
                        <h5 class="card-title">Turmeric</h5>
                        <p class="card-text">Pure turmeric for vibrant and healthy meals.</p>
                        <p><strong>Cost: â‚¹</strong><span class="price">7520</span></p>
                        <div class="stock-info" id="turmeric-stock"></div>
                    </div>
                    <button onclick="addToCart('Turmeric', this)">
                        <div class="card-footer">Add to cart</div>
                    </button>
                </div>
            </div>

            <!-- Pepper -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://th.bing.com/th/id/OIP.xgTOBjcGhi9X7x6oQvcg3wHaE6?rs=1&pid=ImgDetMain" class="card-img-top" alt="Pepper">
                    <div class="card-body">
                        <h5 class="card-title">Pepper</h5>
                        <p class="card-text">Freshly ground pepper for a spicy kick.</p>
                        <p><strong>Cost: â‚¹</strong><span class="price">8820</span></p>
                        <div class="stock-info" id="pepper-stock"></div>
                    </div>
                    <button onclick="addToCart('Pepper', this)">
                        <div class="card-footer">Add to cart</div>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <section class="section1">
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <!-- Black Chili -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://thumbs.dreamstime.com/b/dried-mexican-black-chili-pepper-spicy-sauce-189739315.jpg" class="card-img-top" alt="Black Chili">
                    <div class="card-body">
                        <h5 class="card-title">Black Chili</h5>
                        <p class="card-text">Bold and fiery black chili for extra heat.</p>
                        <p><strong>Cost: â‚¹</strong><span class="price">5099</span></p>
                        <div class="stock-info" id="black-chili-stock"></div>
                    </div>
                    <button onclick="addToCart('Black Chili', this)">
                        <div class="card-footer">Add to cart</div>
                    </button>
                </div>
            </div>

            <!-- Garlic Powder -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://www.tastingtable.com/img/gallery/garlic-powder-doesnt-deserve-its-bad-reputation/l-intro-1669651873.jpg" class="card-img-top" alt="Garlic Powder">
                    <div class="card-body">
                        <h5 class="card-title">Garlic Powder</h5>
                        <p class="card-text">Fine garlic powder for rich, savory taste.</p>
                        <p><strong>Cost: â‚¹</strong><span class="price">9200</span></p>
                        <div class="stock-info" id="garlic-powder-stock"></div>
                    </div>
                    <button onclick="addToCart('Garlic Powder', this)">
                        <div class="card-footer">Add to cart</div>
                    </button>
                </div>
            </div>

            <!-- Saffron -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://www.12taste.com/in/wp-content/uploads/2023/01/dried-saffron-spices-bottle-saffron-flower-wooden-table-scaled.jpg" class="card-img-top" alt="Saffron">
                    <div class="card-body">
                        <h5 class="card-title">Saffron</h5>
                        <p class="card-text">Premium saffron to enhance taste and color.</p>
                        <p><strong>Cost: â‚¹</strong><span class="price">9350</span></p>
                        <div class="stock-info" id="saffron-stock"></div>
                    </div>
                    <button onclick="addToCart('Saffron', this)">
                        <div class="card-footer">Add to cart</div>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Initialize stock if not exists
        if (!localStorage.getItem("stock")) {
            const initialStock = {
                "Cloves": 1200,
                "Turmeric": 1500,
                "Pepper": 1800,
                "Black Chili": 1000,
                "Garlic Powder": 2500,
                "Saffron": 3000,
                // Add all other products from your other pages here
                "Lays": 1500,
                "Devilishly Spicy Chex Mix": 1200,
                "Gourmet Chocolates": 2000,
                "Samosa": 1800,
                "Biscates": 1600,
                "Sweets": 2200,
                "Wheat flour": 2500,
                "Tahini Oil": 1800,
                "Rice": 3000,
                "Dal": 2000,
                "Dry fruits (combo)": 1500,
                "Eggs": 2800,
                "Banana": 3200,
                "Apple": 2500,
                "Strawberry": 1800,
                "Oranges": 2200,
                "Fruits (combo)": 1500,
                "Black, Red Berries": 1200,
                "Paneer": 2000,
                "Milk": 3000,
                "Curd": 2500,
                "Ghee": 1800,
                "Cheese": 2200,
                "Butter": 2000
            };
            localStorage.setItem("stock", JSON.stringify(initialStock));
        }

        // Display stock on page load
        document.addEventListener("DOMContentLoaded", function() {
            updateStockDisplay();
        });

        function updateStockDisplay() {
            const stock = JSON.parse(localStorage.getItem("stock"));
            
            // Update display for each product on this page
            const products = ["Cloves", "Turmeric", "Pepper", "Black Chili", "Garlic Powder", "Saffron"];
            
            products.forEach(product => {
                const elementId = `${product.toLowerCase().replace(' ', '-')}-stock`;
                const element = document.getElementById(elementId);
                if (element) {
                    if (stock[product] <= 0) {
                        element.textContent = "Out of Stock";
                        element.className = "stock-info out-of-stock";
                        // Disable add to cart button
                        document.querySelectorAll(`button[onclick*="${product}"]`).forEach(btn => {
                            btn.disabled = true;
                            btn.style.backgroundColor = "#cccccc";
                            btn.style.cursor = "not-allowed";
                        });
                    } else {
                        element.textContent = `In Stock: ${stock[product]}`;
                        element.className = stock[product] < 100 ? "stock-info low-stock" : "stock-info";
                    }
                }
            });
        }

        function addToCart(name, button) {
            let stock = JSON.parse(localStorage.getItem("stock"));
            if (stock[name] <= 0) {
                alert(`${name} is out of stock!`);
                return;
            }

            let price = parseFloat(button.closest('.card').querySelector('.price').innerText.trim());
            let imgSrc = button.closest('.card').querySelector('img').src;

            let item = { name, price, imgSrc, quantity: 1 };
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            let existingItem = cart.find(cartItem => cartItem.name === name);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push(item);
            }
            
            // Reduce stock
            stock[name]--;
            localStorage.setItem('stock', JSON.stringify(stock));
            localStorage.setItem('cart', JSON.stringify(cart));
            
            updateStockDisplay();
            alert(`${name} has been added to your cart! ${stock[name]} remaining in stock.`);
        }
    </script>
</body>
</html>