<!DOCTYPE html>
<html>
<head>
    <title>GI-shop - Fruits</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" type="icon/x-image" href="/CaseStudy/image.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .section1 { margin: 100px; }
        button { padding: 10px; border: 1px solid; border-radius: 5px; cursor: pointer; background-color: rgb(203, 30, 30); color: white; }
        a { text-decoration: none; color: white; }
        #back, #stock-manage { margin: 10px; padding: 10px; }
        .stock-info { color: #666; font-size: 0.9em; margin-top: 5px; }
        .low-stock { color: #dc3545; font-weight: bold; }
        .out-of-stock { color: #dc3545; font-weight: bold; }
        .card-footer { background: transparent; border-top: none; }
    </style>
</head>
<body>
    <button id="back"><a href="/CaseStudy/mainpage.html">ðŸ”™ Back</a></button>
    <button id="stock-manage"><a href="stock.html">ðŸ“¦ Manage Stock</a></button>

    <section class="section1">
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <!-- Banana -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://insanelygoodrecipes.com/wp-content/uploads/2022/10/Manzano-.jpg" class="card-img-top" alt="Banana">
                    <div class="card-body">
                        <h5 class="card-title">Banana</h5>
                        <p class="card-text">Naturally sweet bananas for daily energy.</p>
                        <p><strong>Cost: â‚¹5500</strong></p>
                        <div class="stock-info" id="banana-stock"></div>
                    </div>
                    <button onclick="addToCart('Banana', 5500, this)">
                        <div class="card-footer">Add to cart</div>
                    </button>
                </div>
            </div>
            
            <!-- Apple -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://th.bing.com/th/id/OIP.vCijlinLQlzHIoqGLFC0gQHaE8?rs=1&pid=ImgDetMain" class="card-img-top" alt="Apple">
                    <div class="card-body">
                        <h5 class="card-title">Apple</h5>
                        <p class="card-text">Crisp and juicy apples for a fresh bite.</p>
                        <p><strong>Cost: â‚¹7200</strong></p>
                        <div class="stock-info" id="apple-stock"></div>
                    </div>
                    <button onclick="addToCart('Apple', 7200, this)">
                        <div class="card-footer">Add to cart</div>
                    </button>
                </div>
            </div>
            
            <!-- Strawberry -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://media.istockphoto.com/id/174262076/photo/strawberries.jpg?s=612x612&w=0&k=20&c=PWW0-LGwwd-a2a6O3sbEgSybseEnY4N8SauR0KSR5ls=" class="card-img-top" alt="Strawberry">
                    <div class="card-body">
                        <h5 class="card-title">Strawberry</h5>
                        <p class="card-text">Sweet and tangy strawberries, farm fresh.</p>
                        <p><strong>Cost: â‚¹8900</strong></p>
                        <div class="stock-info" id="strawberry-stock"></div>
                    </div>
                    <button onclick="addToCart('Strawberry', 8900, this)">
                        <div class="card-footer">Add to cart</div>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <section class="section1">
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <!-- Oranges -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://www.tastingtable.com/img/gallery/are-oranges-named-after-the-color/intro-1666984048.jpg" class="card-img-top" alt="Oranges">
                    <div class="card-body">
                        <h5 class="card-title">Oranges</h5>
                        <p class="card-text">Zesty and refreshing oranges, vitamin-rich.</p>
                        <p><strong>Cost: â‚¹6200</strong></p>
                        <div class="stock-info" id="oranges-stock"></div>
                    </div>
                    <button onclick="addToCart('Oranges', 6200, this)">
                        <div class="card-footer">Add to cart</div>
                    </button>
                </div>
            </div>
            
            <!-- Fruits Combo -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://st2.depositphotos.com/1177973/6479/i/450/depositphotos_64799163-stock-photo-assortment-of-exotic-fruits.jpg" class="card-img-top" alt="Fruits Combo">
                    <div class="card-body">
                        <h5 class="card-title">Fruits (Combo)</h5>
                        <p class="card-text">A perfect mix of fresh and juicy fruits.</p>
                        <p><strong>Cost: â‚¹9700</strong></p>
                        <div class="stock-info" id="fruits-(combo)-stock"></div>
                    </div>
                    <button onclick="addToCart('Fruits (combo)', 9700, this)">
                        <div class="card-footer">Add to cart</div>
                    </button>
                </div>
            </div>
            
            <!-- Berries -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://th.bing.com/th/id/OIP.l60mZqe47JrsdAmhywGHDAHaE7?rs=1&pid=ImgDetMain" class="card-img-top" alt="Berries">
                    <div class="card-body">
                        <h5 class="card-title">Black, Red Berries</h5>
                        <p class="card-text">A berry-rich box full of sweet goodness.</p>
                        <p><strong>Cost: â‚¹8100</strong></p>
                        <div class="stock-info" id="black,-red-berries-stock"></div>
                    </div>
                    <button onclick="addToCart('Black, Red Berries', 8100, this)">
                        <div class="card-footer">Add to cart</div>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Initialize stock if not exists
        if (!localStorage.getItem("stock")) {
            const initialStock = JSON.parse(localStorage.getItem("stock")) || {};
            const fruits = {
                "Banana": 3200,
                "Apple": 2500,
                "Strawberry": 1800,
                "Oranges": 2200,
                "Fruits (combo)": 1500,
                "Black, Red Berries": 1200
            };
            localStorage.setItem("stock", JSON.stringify({...initialStock, ...fruits}));
        }

        // Display stock on page load
        document.addEventListener("DOMContentLoaded", function() {
            updateStockDisplay();
        });

        function updateStockDisplay() {
            const stock = JSON.parse(localStorage.getItem("stock"));
            const products = [
                "Banana", "Apple", "Strawberry", 
                "Oranges", "Fruits (combo)", "Black, Red Berries"
            ];
            
            products.forEach(product => {
                const elementId = `${product.toLowerCase().replace(/[ ,]/g, '-')}-stock`;
                const element = document.getElementById(elementId);
                if (element) {
                    if (stock[product] <= 0) {
                        element.textContent = "Out of Stock";
                        element.className = "stock-info out-of-stock";
                        document.querySelectorAll(`button[onclick*="${product}"]`).forEach(btn => {
                            btn.disabled = true;
                            btn.style.backgroundColor = "#cccccc";
                            btn.style.cursor = "not-allowed";
                        });
                    } else {
                        element.textContent = `In Stock: ${stock[product]}`;
                        element.className = stock[product] < 100 ? "stock-info low-stock" : "stock-info";
                    }
                }
            });
        }

        function addToCart(name, price, button) {
            let stock = JSON.parse(localStorage.getItem("stock"));
            if (stock[name] <= 0) {
                alert(`${name} is out of stock!`);
                return;
            }

            let imgSrc = button.closest('.card').querySelector('img').src;
            let item = { name, price, imgSrc, quantity: 1 };
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            let existingItem = cart.find(cartItem => cartItem.name === name);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push(item);
            }
            
            stock[name]--;
            localStorage.setItem('stock', JSON.stringify(stock));
            localStorage.setItem('cart', JSON.stringify(cart));
            
            updateStockDisplay();
            alert(`${name} added to cart! ${stock[name]} remaining.`);
        }
    </script>
</body>
</html>