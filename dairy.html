<!DOCTYPE html>
<html>
<head>
    <title>GI-shop - Fruits</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" type="icon/x-image" href="/CaseStudy/image.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .section1 { margin: 100px; }
        button { padding: 10px; border: 1px solid; border-radius: 5px; cursor: pointer; background-color: rgb(203, 30, 30); color: white; }
        a { text-decoration: none; color: white; }
        #back, #stock-manage { margin: 10px; padding: 10px; }
        .stock-info { color: #666; font-size: 0.9em; margin-top: 5px; }
        .low-stock { color: #dc3545; font-weight: bold; }
        .out-of-stock { color: #dc3545; font-weight: bold; }
        .card-footer { background: transparent; border-top: none; }
    </style>
</head>
<body>
    <button id="back"><a href="/CaseStudy/mainpage.html">ðŸ”™ Back</a></button>
    <button id="stock-manage"><a href="stock.html">ðŸ“¦ Manage Stock</a></button>

    <section class="section1">
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <!-- Paneer -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://mir-s3-cdn-cf.behance.net/project_modules/1400/b197ad140477653.62429b350cf0a.jpg" class="card-img-top" alt="Paneer">
                    <div class="card-body">
                        <h5 class="card-title">Paneer</h5>
                        <p class="card-text">Soft and fresh paneer for delicious dishes.</p>
                        <p><strong>Cost: â‚¹2600</strong></p>
                        <div class="stock-info" id="paneer-stock"></div>
                    </div>
                    <button onclick="addToCart('Paneer', 2600, this)">Add to cart</button>
                </div>
            </div>
            
            <!-- Milk -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://th.bing.com/th/id/R.99c294d4d57e3971cd757b68919277b9?rik=y16jBWqa96vKLg&riu=http%3a%2f%2fstatic1.businessinsider.com%2fimage%2f559ec06deab8eabe6d35bd10-1200%2fmilk.jpg&ehk=uxF5%2bd%2fikcrbaY1V%2fvYMt3TESNk%2bBMZ1Pyg%2bGj%2bmM%2fA%3d&risl=&pid=ImgRaw&r=0" class="card-img-top" alt="Milk">
                    <div class="card-body">
                        <h5 class="card-title">Milk</h5>
                        <p class="card-text">Pure and nutritious milk for your health.</p>
                        <p><strong>Cost: â‚¹2700</strong></p>
                        <div class="stock-info" id="milk-stock"></div>
                    </div>
                    <button onclick="addToCart('Milk', 2700, this)">Add to cart</button>
                </div>
            </div>
            
            <!-- Curd -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://5.imimg.com/data5/SELLER/Default/2021/12/KH/OL/NS/1011904/curd-bucket-500x500.jpg" class="card-img-top" alt="Curd">
                    <div class="card-body">
                        <h5 class="card-title">Curd</h5>
                        <p class="card-text">Thick and creamy curd for a refreshing taste.</p>
                        <p><strong>Cost: â‚¹2800</strong></p>
                        <div class="stock-info" id="curd-stock"></div>
                    </div>
                    <button onclick="addToCart('Curd', 2800, this)">Add to cart</button>
                </div>
            </div>
        </div>
    </section>

    <section class="section1">
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <!-- Ghee -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://th.bing.com/th/id/OIP.GU65YTG8GRrEKFJ2HgTy3QHaFj?rs=1&pid=ImgDetMain" class="card-img-top" alt="Ghee">
                    <div class="card-body">
                        <h5 class="card-title">Ghee</h5>
                        <p class="card-text">Rich and aromatic ghee for authentic flavors.</p>
                        <p><strong>Cost: â‚¹2900</strong></p>
                        <div class="stock-info" id="ghee-stock"></div>
                    </div>
                    <button onclick="addToCart('Ghee', 2900, this)">Add to cart</button>
                </div>
            </div>
            
            <!-- Cheese -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://th.bing.com/th/id/OIP.YrN2TreQfuxMm1dS3OYL6AHaEo?rs=1&pid=ImgDetMain" class="card-img-top" alt="Cheese">
                    <div class="card-body">
                        <h5 class="card-title">Cheese</h5>
                        <p class="card-text">Smooth and tasty cheese for every bite.</p>
                        <p><strong>Cost: â‚¹3000</strong></p>
                        <div class="stock-info" id="cheese-stock"></div>
                    </div>
                    <button onclick="addToCart('Cheese', 3000, this)">Add to cart</button>
                </div>
            </div>
            
            <!-- Butter -->
            <div class="col">
                <div class="card h-100">
                    <img src="https://th.bing.com/th/id/OIP.XJ7JYAR5TT7Y2wjgGNUyWgHaEo?rs=1&pid=ImgDetMain" class="card-img-top" alt="Butter">
                    <div class="card-body">
                        <h5 class="card-title">Butter</h5>
                        <p class="card-text">Pure and creamy butter for rich taste.</p>
                        <p><strong>Cost: â‚¹3100</strong></p>
                        <div class="stock-info" id="butter-stock"></div>
                    </div>
                    <button onclick="addToCart('Butter', 3100, this)">Add to cart</button>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Initialize stock if not exists
        if (!localStorage.getItem("stock")) {
            const initialStock = JSON.parse(localStorage.getItem("stock")) || {};
            const dairy = {
                "Paneer": 2000,
                "Milk": 3000,
                "Curd": 2500,
                "Ghee": 1800,
                "Cheese": 2200,
                "Butter": 2000
            };
            localStorage.setItem("stock", JSON.stringify({...initialStock, ...dairy}));
        }

        // Display stock on page load
        document.addEventListener("DOMContentLoaded", function() {
            updateStockDisplay();
        });

        function updateStockDisplay() {
            const stock = JSON.parse(localStorage.getItem("stock"));
            const products = [
                "Paneer", "Milk", "Curd", 
                "Ghee", "Cheese", "Butter"
            ];
            
            products.forEach(product => {
                const elementId = `${product.toLowerCase().replace(/[ ,]/g, '-')}-stock`;
                const element = document.getElementById(elementId);
                if (element) {
                    if (stock[product] <= 0) {
                        element.textContent = "Out of Stock";
                        element.className = "stock-info out-of-stock";
                        document.querySelectorAll(`button[onclick*="${product}"]`).forEach(btn => {
                            btn.disabled = true;
                            btn.style.backgroundColor = "#cccccc";
                            btn.style.cursor = "not-allowed";
                        });
                    } else {
                        element.textContent = `In Stock: ${stock[product]}`;
                        element.className = stock[product] < 100 ? "stock-info low-stock" : "stock-info";
                    }
                }
            });
        }

        function addToCart(name, price, button) {
            let stock = JSON.parse(localStorage.getItem("stock"));
            if (stock[name] <= 0) {
                alert(`${name} is out of stock!`);
                return;
            }

            let imgSrc = button.closest('.card').querySelector('img').src;
            let item = { name, price, imgSrc, quantity: 1 };
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            let existingItem = cart.find(cartItem => cartItem.name === name);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push(item);
            }
            
            stock[name]--;
            localStorage.setItem('stock', JSON.stringify(stock));
            localStorage.setItem('cart', JSON.stringify(cart));
            
            updateStockDisplay();
            alert(`${name} added to cart! ${stock[name]} remaining.`);
        }
    </script>
</body>
</html>